import{M as t,D as o,S as r,Y as n}from"./p-fe9c1440.js";import{g as e}from"./p-89fc07b9.js";import{O as s}from"./p-23766e60.js";import{v as a}from"./p-2799ada0.js";import{c}from"./p-10a191b8.js";const p=t=>{const o=c.get(t);return null==o&&console.error(`provided an invalid color string, '${t}'`),null==o?[0,0,0]:o.value};const i=(t,o)=>{const[r,n,s]=p(t.color||"black");return e(t,o).map(t=>[t.x,t.y,r,n,s])},d=({scene:t,container:o,viewport:r,toClipSpace:n,onUpdate:e})=>{const c=new s(n(r.start.getTime()),n(r.end.getTime()),r.yMax,r.yMin,.1,1e3);return c.position.z=500,{toClipSpace:n,scene:t,container:o,id:a(),camera:c,dispose:()=>(t=>{t.children.forEach(t=>{try{const o=t;o.geometry.dispose(),(Array.isArray(o.material)?o.material:[o.material]).forEach(t=>{t.dispose()})}catch(o){throw new Error(`\n        scene currently does not support objects of type ${t.constructor.name}\n        and does not know how to dispose of it.\n      `)}})})(t),viewportGroup:r.group,updateViewPort:t=>{var{start:o,end:r}=t,s=function(t,o){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)o.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(t,n[e])&&(r[n[e]]=t[n[e]])}return r}(t,["start","end"]);c.left=n(o.getTime()),c.right=n(r.getTime()),c.updateProjectionMatrix(),e&&e(Object.assign({start:o,end:r},s))}}},f=t=>t.map(t=>e(t,t.resolution).length).reduce((t,o)=>t+o,0),u=e=>{const s=e.end.getTime()-e.start.getTime(),a=e.start.getTime()-.25*s,c=(e=>e<10*t?1:e<o?r/10:e<7*o?r:e<n?t:e<30*n?30*t:o)(s);return t=>Math.floor((t-a)/c)},l=(t,o)=>Math.abs(o(t.getTime()))>=10**7,j=(t,o)=>{const r=l(t.start,o)||l(t.end,o),n=t.end.getTime()-t.start.getTime(),e=o(t.end.getTime())-o(t.start.getTime());return r||n>e&&e<3e3};export{u as a,j as b,d as c,p as g,f as n,i as v}