import{r as e,h as t}from"./p-b5389ff3.js";import{L as r}from"./p-063edcd0.js";import{S as n,D as o}from"./p-7e2c0687.js";import"./p-2e85d2ee.js";import{M as a}from"./p-fe9c1440.js";import{c as i}from"./p-b18ab5ec.js";const s=new Date(2e3,0,0),c=new Date(2e3,0,1),u=(c.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),s.getTime(),{start:s,end:c}),l={height:500,width:500},d={position:r.RIGHT,width:200,legendLabels:{title:"Number of data points"}};var f=new RegExp("(%[a-f0-9]{2})|([^%]+?)","gi"),p=new RegExp("(%[a-f0-9]{2})+","gi");function m(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(1===e.length)return e;var r=e.slice(0,t=t||1),n=e.slice(t);return Array.prototype.concat.call([],m(r),m(n))}function g(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(f)||[],r=1;r<t.length;r++)t=(e=m(t,r).join("")).match(f)||[];return e}}var b=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var r={"%FE%FF":"��","%FF%FE":"��"},n=p.exec(e);n;){try{r[n[0]]=decodeURIComponent(n[0])}catch(t){var o=g(n[0]);o!==n[0]&&(r[n[0]]=o)}n=p.exec(e)}r["%C2"]="�";for(var a=Object.keys(r),i=0;i<a.length;i++){var s=a[i];e=e.replace(new RegExp(s,"g"),r[s])}return e}(e)}},O=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]},v=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),a=0;a<n.length;a++){var i=n[a],s=e[i];(o?-1!==t.indexOf(i):t(i,s,e))&&(r[i]=s)}return r},y=i((function(e,t){function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function n(e,t){return t.encode?t.strict?encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()):encodeURIComponent(e):e}function o(e,t){return t.decode?b(e):e}function a(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function i(e){const t=(e=a(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function s(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function c(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),n[e=e.replace(/\[\]$/,"")]=t?void 0!==n[e]?[].concat(n[e],r):[r]:r};case"comma":case"separator":return(t,r,n)=>{const a="string"==typeof r&&r.includes(e.arrayFormatSeparator),i="string"==typeof r&&!a&&o(r,e).includes(e.arrayFormatSeparator);r=i?o(r,e):r;const s=a||i?r.split(e.arrayFormatSeparator).map(t=>o(t,e)):null===r?r:o(r,e);n[t]=s};default:return(e,t,r)=>{r[e]=void 0!==r[e]?[].concat(r[e],t):t}}}(t),a=Object.create(null);if("string"!=typeof e)return a;if(!(e=e.trim().replace(/^[?#&]/,"")))return a;for(const r of e.split("&")){if(""===r)continue;let[e,i]=O(t.decode?r.replace(/\+/g," "):r,"=");i=void 0===i?null:["comma","separator"].includes(t.arrayFormat)?i:o(i,t),n(o(e,t),i,a)}for(const r of Object.keys(a)){const e=a[r];if("object"==typeof e&&null!==e)for(const r of Object.keys(e))e[r]=s(e[r],t);else a[r]=s(e,t)}return!1===t.sort?a:(!0===t.sort?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce((e,t)=>{const r=a[t];return e[t]=Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):r,e},Object.create(null))}t.extract=i,t.parse=c,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const o=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],a=function(e){switch(e.arrayFormat){case"index":return t=>(r,o)=>{const a=r.length;return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:null===o?[...r,[n(t,e),"[",a,"]"].join("")]:[...r,[n(t,e),"[",n(a,e),"]=",n(o,e)].join("")]};case"bracket":return t=>(r,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:null===o?[...r,[n(t,e),"[]"].join("")]:[...r,[n(t,e),"[]=",n(o,e)].join("")];case"comma":case"separator":return t=>(r,o)=>null==o||0===o.length?r:0===r.length?[[n(t,e),"=",n(o,e)].join("")]:[[r,n(o,e)].join(e.arrayFormatSeparator)];default:return t=>(r,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:null===o?[...r,n(t,e)]:[...r,[n(t,e),"=",n(o,e)].join("")]}}(t),i={};for(const r of Object.keys(e))o(r)||(i[r]=e[r]);const s=Object.keys(i);return!1!==t.sort&&s.sort(t.sort),s.map(r=>{const o=e[r];return void 0===o?"":null===o?n(r,t):Array.isArray(o)?o.reduce(a(r),[]).join("&"):n(r,t)+"="+n(o,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=O(e,"#");return Object.assign({url:r.split("?")[0]||"",query:c(i(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:o(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0},r);const o=a(e.url).split("?")[0]||"",i=t.extract(e.url),s=t.parse(i,{sort:!1}),c=Object.assign(s,e.query);let u=t.stringify(c,r);u&&(u="?"+u);let l=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(l="#"+n(e.fragmentIdentifier,r)),`${o}${u}${l}`},t.pick=(e,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0},n);const{url:o,query:a,fragmentIdentifier:i}=t.parseUrl(e,n);return t.stringifyUrl({url:o,query:v(a,r),fragmentIdentifier:i},n)},t.exclude=(e,r,n)=>{const o=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,o,n)}})).parse;const h=e=>"true"===e,j=e=>{const t=JSON.parse(e),{x:r}=t;return Object.assign(Object.assign({},t),{x:null!=r?r.map(e=>Object.assign(Object.assign({},e),{value:new Date(e.value)})):void 0})},w=e=>Object.assign(Object.assign({},e),{data:e.data.map(e=>({x:Number(e.x),y:e.y}))}),S=700,N=400,{alarms:E,messageOverrides:x,width:I=S,height:F=N,axis:J,componentTag:C,annotations:D,viewportStart:R,viewportEnd:T,duration:U,isEditing:$,dataStreams:A,gestures:q,legend:B,tableColumns:L}=(()=>{const e=y(window.location.search);return{alarms:e.alarms?JSON.parse(e.alarms):void 0,width:e.width?JSON.parse(e.width):void 0,axis:e.axis?JSON.parse(e.axis):void 0,height:e.height?JSON.parse(e.height):void 0,duration:e.duration?JSON.parse(e.duration):void 0,errMsg:e.errMsg,gestures:null==e.gestures||h(e.gestures),delayBeforeDataLoads:null!=e.delayBeforeDataLoads?JSON.parse(e.delayBeforeDataLoads):0,dataStreamInfos:null!=e.dataStreamInfos?JSON.parse(e.dataStreamInfos):[],tableColumns:null!=e.tableColumns?JSON.parse(e.tableColumns):[],legend:null!=e.legend?JSON.parse(e.legend):d,messageOverrides:null!=e.messageOverrides?JSON.parse(e.messageOverrides):void 0,componentTag:null!=e.componentTag?e.componentTag:"sc-line-chart",displayInfoNames:!!e.displayInfoNames&&h(e.displayInfoNames),annotations:null!=e.annotations?j(e.annotations):void 0,isEditing:null!=e.isEditing&&h(e.isEditing),hasError:null!=e.hasError&&h(e.hasError),dataStreams:null!=e.dataStreams?JSON.parse(e.dataStreams).map(w):[],asyncDataStreams:null!=e.asyncDataStreams?JSON.parse(e.asyncDataStreams).map(w):[],viewportStart:null!=e.viewportStart?new Date(e.viewportStart):new Date(2e3,0,0),viewportEnd:null!=e.viewportEnd?new Date(e.viewportEnd):new Date(2e3,0,1)}})(),M=e=>{if("string"!=typeof e)return Object.assign(Object.assign({},l),{width:I,height:F})},k=e=>"string"==typeof e?e:e+"px",H=class{constructor(t){e(this,t),this.dataStreamInfos=[],this.component=C}onWidgetUpdated({detail:e}){e.dataStreamInfo&&(this.dataStreamInfos=e.dataStreamInfo)}render(){const e=Object.assign(Object.assign({},u),{start:R,end:T,duration:U,group:"some-viewport-group"});return null!=U&&(delete e.start,delete e.end),t("div",{style:{width:k(I),height:k(F)}},t(this.component,{widgetId:"some-widget-id",dataStreams:A,isEditing:$,alarms:E,viewport:e,legend:B,size:M(I),axis:J,tableColumns:L,annotations:D,gestures:q,messageOverrides:x,invalidTagErrorHeader:"invalidComponentTag.header",invalidTagErrorSubheader:"invalidComponentTag.subheader",liveModeOnly:"invalidWidgetForHistoricalData.content"}),t("sc-webgl-context",null))}};export{H as widget_test_route}