import{r as t,h as i,g as s,e}from"./p-b5389ff3.js";import{D as r}from"./p-063edcd0.js";import{S as a}from"./p-7e2c0687.js";import"./p-7747df38.js";import"./p-2e85d2ee.js";import{p as o}from"./p-fe9c1440.js";import{g as n}from"./p-aa8712f2.js";import{a as l,b as d}from"./p-45352c6b.js";import"./p-6b1d36dc.js";import"./p-e2758593.js";import{a as h,b as c}from"./p-d4ada2ef.js";import"./p-89fc07b9.js";import"./p-23766e60.js";import{w as p}from"./p-1b9cc93b.js";import"./p-b18ab5ec.js";import{g as m}from"./p-9472c7cc.js";import{l as u,D as g}from"./p-35c421c4.js";import{v,a as f,i as w}from"./p-01ff3702.js";import{v as b}from"./p-337dace2.js";import{D as C}from"./p-615633c9.js";import{V as j}from"./p-741c7e7a.js";import{t as y,T as x}from"./p-53a45d34.js";import{u as k}from"./p-5c405e5c.js";const L=class{constructor(i){t(this,i)}render(){return i("div",{class:"grid-wrapper"},i("div",{class:"grid"},i("slot",null)))}};L.style="sc-grid .grid{--widget-min-width:190px;--widget-min-height:100px;display:grid;grid-template-columns:repeat(auto-fit, minmax(var(--widget-min-width), 1fr));grid-auto-rows:minmax(var(--widget-min-height), 1fr);grid-gap:10px;margin:10px}sc-grid .grid-wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center}";const D=class{constructor(i){t(this,i),this.displayToolTip=()=>{const t=this.el.querySelector(".tooltip-container"),i=this.el.querySelector(".cell-tooltip");null!=i&&null!=t&&(i.style.display="block",this.tooltip=y(t,Object.assign(Object.assign({},x),{placement:"left",content:i})))}}componentDidLoad(){this.displayToolTip()}disconnectedCallback(){this.tooltip&&this.tooltip.destroy()}render(){const t=this.breachedThreshold?this.breachedThreshold.color:void 0,s=(null!=this.propertyPoint||null!=this.alarmPoint)&&this.isEnabled;return i("div",{class:"tooltip-container"},i("div",{class:"cell-tooltip awsui-util-container awsui"},i("div",{class:{"awsui-util-container-header":!0,"awsui-util-mb-m":s}},i("h3",null,this.title)),s&&i("div",null,i("div",{class:"awsui-util-spacing-v-s"},this.propertyPoint&&i("div",null,i("div",{class:"awsui-util-label"},"Latest value:"),i("div",null,i("strong",{style:{color:t}},i(j,{value:this.propertyPoint.y}))," ","at"," ",new Date(this.propertyPoint.x).toLocaleString("en-US",{hour12:!0,minute:"numeric",hour:"numeric",year:"numeric",month:"numeric",day:"numeric"}))),this.alarmPoint&&i("div",null,i("div",{class:"awsui-util-label"},"Status:"),i("div",null,i("strong",{style:{color:t}},i(j,{value:this.alarmPoint.y}))," ","since"," ",new Date(this.alarmPoint.x).toLocaleString("en-US",{hour12:!0,minute:"numeric",hour:"numeric",year:"numeric",month:"numeric",day:"numeric"}),this.breachedThreshold&&this.breachedThreshold.description&&i("div",null,"(",this.breachedThreshold.description,")")))))),i("slot",null))}get el(){return s(this)}},S=()=>i("svg",{width:"25px",height:"25px",viewBox:"0 0 30 30"},i("defs",null,i("path",{d:"M14.8742857,24.7485714 C20.3277031,24.7485714 24.7485714,20.3277031 24.7485714,14.8742857 C24.7485714,9.4208683 20.3277031,5 14.8742857,5 C9.4208683,5 5,9.4208683 5,14.8742857 C5,20.3277031 9.4208683,24.7485714 14.8742857,24.7485714 Z M13.64,18.5771429 L16.1566605,18.5771429 L16.1566605,21.0457143 L13.64,21.0457143 L13.64,18.5771429 Z M10.7019512,12.6821943 C10.7134712,12.0601112 10.8200302,11.4898769 11.0216312,10.9714743 C11.2232322,10.4530717 11.5054693,10.0037962 11.8683512,9.62363429 C12.231233,9.24347238 12.6689886,8.94683535 13.1816312,8.73371429 C13.6942737,8.52059322 14.267388,8.41403429 14.9009912,8.41403429 C15.7189152,8.41403429 16.4014684,8.52635316 16.9486712,8.75099429 C17.4958739,8.97563541 17.9365095,9.25499262 18.2705912,9.58907429 C18.6046728,9.92315596 18.8437104,10.2831524 18.9877112,10.6690743 C19.1317119,11.0549962 19.2037112,11.4149926 19.2037112,11.7490743 C19.2037112,12.3020371 19.1317119,12.7570725 18.9877112,13.1141943 C18.8437104,13.4713161 18.6651522,13.776593 18.4520312,14.0300343 C18.2389101,14.2834756 18.0027525,14.4994734 17.7435512,14.6780343 C17.4843499,14.8565952 17.2395523,15.0351534 17.0091512,15.2137143 C16.77875,15.3922752 16.5742721,15.5967531 16.3957112,15.8271543 C16.2171503,16.0575554 16.1546517,16.3455526 16.1085714,16.6911543 L16.1085714,17.3477943 L13.64,17.3477943 L13.64,16.5701943 C13.64,15.9718011 13.7557976,15.6706595 13.9113184,15.3365778 C14.0668391,15.0024962 14.3480301,14.7068355 14.5553912,14.4706743 C14.7627522,14.2345131 14.98163,14.0300351 15.2120312,13.8572343 C15.4424323,13.6844334 15.6555502,13.5116351 15.8513912,13.3388343 C16.0472321,13.1660334 16.2056306,12.9759553 16.3265912,12.7685943 C16.4475518,12.5612332 16.5022712,12.3020358 16.4907512,11.9909943 C16.4907512,11.4610716 16.3611525,11.0693956 16.1019512,10.8159543 C15.8427499,10.562513 15.4827535,10.4357943 15.0219512,10.4357943 C14.7109096,10.4357943 14.4430723,10.4962737 14.2184312,10.6172343 C13.99379,10.7381949 13.8094719,10.8994733 13.6654712,11.1010743 C13.5214704,11.3026753 13.4149115,11.5388329 13.3457912,11.8095543 C13.2766708,12.0802756 13.2421112,12.3711527 13.2421112,12.6821943 L10.7019512,12.6821943 Z",id:"path-1"})),i("g",{fill:"none"},i("rect",{x:"0",y:"0",width:"30",height:"30"}),i("mask",{id:"mask-2",fill:"white"},i("use",{xlinkHref:"#path-1"})),i("g",{id:"Oval"}),i("g",{mask:"url(#mask-2)",fill:"#DEE0E2"},i("rect",{x:"0",y:"0",width:"30",height:"30"})))),O=class{constructor(i){t(this,i),this.displayToolTip=()=>{const t=this.el.querySelector(".help-icon"),i=this.el.querySelector('[role="tooltip"]');null!=i&&null!=t&&(i.style.display="block",this.tooltip=y(t,Object.assign(Object.assign({},x),{content:i})))}}disconnectedCallback(){this.tooltip&&this.tooltip.destroy()}render(){return i("div",{class:"help-icon",tabIndex:-1,onMouseOver:this.displayToolTip,onFocus:this.displayToolTip},i(S,null),i("div",{role:"tooltip",class:"awsui-util-container awsui",style:{display:"none"}},i("div",{class:"awsui-util-spacing-v-s"},i("p",null,this.message))))}get el(){return s(this)}},P=({alarm:t,property:i})=>i?i.detailedName||i.name:t?t.detailedName||t.name:"",_=class{constructor(i){t(this,i),this.dateRangeChange=e(this,"dateRangeChange",7),this.widgetUpdated=e(this,"widgetUpdated",7),this.collapseVertically=!0,this.isEditing=!1,this.messageOverrides={},this.names=[],this.start=v(this.viewport),this.end=f(this.viewport),this.duration=d(this.viewport)?void 0:o(this.viewport.duration),this.onDateRangeChange=u(([t,i,s])=>{this.dateRangeChange.emit([t,i,s])},g,{leading:!0,trailing:!0}),this.onUpdate=({start:t,end:i,duration:s})=>{const e=v(this.viewport).getTime()!==t.getTime()||f(this.viewport).getTime()!==i.getTime(),r=w(this.viewport);e&&!r&&this.onDateRangeChange([t,i,this.viewport.group]),this.start=t,this.end=i,this.duration=s},this.emitUpdatedWidgetConfiguration=t=>{const i={movement:void 0,scale:void 0,layout:void 0,legend:void 0,annotations:this.annotations,axis:void 0,widgetId:this.widgetId,dataStreams:t?m(t):this.dataStreams};this.widgetUpdated.emit(i)},this.onChangeLabel=({streamId:t,name:i})=>{this.names=k(this.names,i,t),this.onWidgetUpdated()},this.getPoints=()=>h({viewport:{start:this.start,end:this.end},dataStreams:this.dataStreams,selectedDate:this.end,allowMultipleDates:!0,dataAlignment:r.EITHER}),this.getBreachedThreshold=(t,i)=>c({value:t&&t.y,date:d(this.viewport)?new Date(this.viewport.end):new Date,dataStreams:this.dataStreams,dataStream:i,thresholds:n(this.annotations)})}componentWillRender(){b(this)}componentDidLoad(){p.addChartScene({manager:{id:this.widgetId,viewportGroup:this.viewport.group,updateViewPort:this.onUpdate},duration:this.duration})}onViewPortChange(t){this.onUpdate(Object.assign(Object.assign({},t),{duration:d(t)?void 0:o(t.duration),start:v(this.viewport),end:f(this.viewport)}))}disconnectedCallback(){p.removeChartScene(this.widgetId)}onWidgetUpdated(){const t=this.dataStreams.map(t=>{const i=this.names.find(({id:i})=>t.id===i),s=null!=i?i.name:t.name;return Object.assign(Object.assign({},t),{name:s})});this.emitUpdatedWidgetConfiguration(t)}render(){var t,s;const e=null!=this.duration,r=this.getPoints(),o=(t=>{const i=t.filter(({streamType:t})=>t===a.ALARM),s=t.filter(({streamType:t})=>t!==a.ALARM),e=i.filter(({id:t})=>!s.some(({associatedStreams:i=[]})=>i.some(i=>i.id===t))),r=[...s,...e].map(({id:t})=>t);return t.filter(({id:t})=>r.includes(t)).filter(l)})(d=this.dataStreams).map(t=>t.streamType===a.ALARM?[{alarm:t}]:null!=t.associatedStreams&&t.associatedStreams.some(({type:t})=>t===a.ALARM)?(t.associatedStreams||[]).map(({id:t})=>d.find(({id:i})=>i===t)).filter(l).map(i=>({property:t,alarm:i})):[{property:t}]).flat(),n=o.length>1;var d;return i("div",{class:{tall:!this.collapseVertically}},!e&&i("div",{class:"help-icon-container"},i("sc-help-tooltip",{message:null!==(s=null===(t=this.messageOverrides)||void 0===t?void 0:t.liveModeOnly)&&void 0!==s?s:C.liveModeOnly})),i("sc-grid",null,o.map(({alarm:t,property:s})=>{if(null==(t||s))return;const a=t&&r.find(i=>i.streamId===t.id),o=s&&r.find(t=>t.streamId===s.id),l=a?a.point:void 0,d=o?o.point:void 0,h=l||d,c=t||s,p=h&&c&&this.getBreachedThreshold(h,c),m=t&&this.dataStreams.find(i=>i.id===t.id),u=t?m:s;return i("sc-grid-tooltip",{title:P({alarm:t,property:s}),propertyPoint:d,alarmPoint:l,breachedThreshold:p,isEnabled:e},this.renderCell({isEnabled:e,trendStream:s,propertyStream:s,propertyPoint:d,alarmStream:m,alarmPoint:l,breachedThreshold:p,isEditing:this.isEditing,viewport:{start:this.start,end:this.end},miniVersion:n,onChangeLabel:this.onChangeLabel,messageOverrides:this.messageOverrides,labelsConfig:this.labelsConfig,icon:p?p.icon:void 0,valueColor:p?p.color:void 0,error:u?u.error:void 0,isLoading:u&&u.isLoading||!1,isRefreshing:u&&u.isRefreshing||!1}))})))}static get watchers(){return{viewport:["onViewPortChange"]}}};_.style="sc-widget-grid .help-icon-container{z-index:100;position:absolute;right:0;top:0}sc-widget-grid .container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;overflow:auto;position:relative;-ms-overflow-style:none;scrollbar-width:none}sc-widget-grid .container::-webkit-scrollbar{display:none}";export{L as sc_grid,D as sc_grid_tooltip,O as sc_help_tooltip,_ as sc_widget_grid}