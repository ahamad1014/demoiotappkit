System.register(["./p-d184cbbe.system.js","./p-cba1ca58.system.js","./p-2792cb06.system.js","./p-4143ebfb.system.js","./p-dfaa22dc.system.js"],(function(a){"use strict";var r,t,e,n,o,s,i,h,c,l,u,v,d,f,p;return{setters:[function(){},function(a){r=a.a},function(a){t=a.I;e=a.R;n=a.D;o=a.a;s=a.B;i=a.b;h=a.S},function(a){c=a.n;l=a.v;u=a.g;v=a.c;d=a.a;f=a.b},function(a){p=a.g}],execute:function(){var m="\nprecision highp float;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nattribute vec4 status;\nattribute vec2 position;\nattribute vec3 color;\nvarying vec3 vColor;\n\nvoid main() {\n  float width = status.z;\n  float height = status.w;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position.x * width + status.x, position.y * height + status.y, 0.0, 1.0);\n  vColor = color;\n}\n";var S="\nprecision highp float;\nvarying vec3 vColor;\n\nvoid main() {\n  gl_FragColor = vec4(vColor, 1.0);\n}\n";var g=a("H",1);var C=.5;var y=a("S",34-C);var b=[213,219,219];var w=[135,149,150];var z=2;var x=4;var O=3;var A=function(a){return a.reduce((function(a,r){var t=Math.max(r.length,0);return a+t}),0)};var F=function(a){var r=a.nextX,t=a.currX,e=a.toClipSpace,n=a.alarms;var o=n?n.expires:undefined;if(o!=null){var s=p(e,o);if(r==null){return s}return Math.min(p(e,r-t),s)}if(r!=null){return p(e,r-t)}return p(e,Date.now()-t)};var j=function(a){var t=a.dataStreams,e=a.mesh,n=a.toClipSpace,o=a.thresholds,s=a.thresholdOptions,i=a.chartSize,h=a.alarms;var c=t.map((function(a){return l(a,a.resolution)}));e.count=A(c);var v=e.geometry;var d=v.attributes,f=d.color,p=d.status;var m=0;var S=0;var C=g/t.length;var z=y/i.height;var j=C-z;c.forEach((function(a,t){var e;var i=b;a.forEach((function(c,l){var v=a[l+1];var d=(v||[])[0],y=d===void 0?undefined:d;var z=c[0],A=c[1];if(e!=null&&e!==A){i=i===b?w:b}var M=r(A,o);if(M==null||!s.showColor){var U=i[0],B=i[1],D=i[2];f.array[S]=U;f.array[S+1]=B;f.array[S+2]=D}else{var X=u(M.color),E=X[0],V=X[1],_=X[2];f.array[S]=E;f.array[S+1]=V;f.array[S+2]=_}S+=O;p.array[m]=n(z);p.array[m+1]=g-C*(t+1);p.array[m+2]=F({currX:z,nextX:y,toClipSpace:n,alarms:h});p.array[m+3]=j;m+=x;e=A}))}));p.needsUpdate=true;f.needsUpdate=true};var M=[0,0,0,1,1,0,0,1,1,0,1,1];var U=function(a,r){a.setAttribute("position",new s(new Float32Array(M),z));a.setAttribute("status",new i(new Float32Array(r*x),x,false));a.setAttribute("color",new i(new Uint8Array(r*O),O,true))};var B=function(a){var r=a.alarms,s=a.dataStreams,i=a.toClipSpace,h=a.bufferFactor,l=a.minBufferSize,u=a.thresholdOptions,v=a.thresholds,d=a.chartSize;var f=new t;var p=Math.max(l,c(s)*h);U(f,p);var g=new e({vertexShader:m,fragmentShader:S,side:n,transparent:false});var C=new o(f,g,p);j({dataStreams:s,mesh:C,toClipSpace:i,thresholds:v,thresholdOptions:u,chartSize:d,alarms:r});C.frustumCulled=false;return C};var D=function(a){var r=a.alarms,t=a.statuses,e=a.dataStreams,n=a.toClipSpace,o=a.thresholdOptions,s=a.thresholds,i=a.chartSize,h=a.hasDataChanged,c=a.hasAnnotationChanged,l=a.hasSizeChanged;if(h||c||l){j({dataStreams:e,mesh:t,toClipSpace:n,thresholds:s,thresholdOptions:o,chartSize:i,alarms:r})}};var X=function(a){return a.geometry.attributes.status.array.length/x};var E=a("c",(function(a){var r=a.alarms,t=a.dataStreams,e=a.container,n=a.viewport,o=a.bufferFactor,s=a.minBufferSize,i=a.onUpdate,c=a.thresholdOptions,l=a.thresholds,u=a.chartSize;var f=new h;var p=d(n);f.add(B({alarms:r,dataStreams:t,toClipSpace:p,bufferFactor:o,minBufferSize:s,thresholdOptions:c,thresholds:l,chartSize:u}));return v({scene:f,viewport:n,container:e,toClipSpace:p,onUpdate:i})}));var V=a("u",(function(a){var r=a.scene,t=a.alarms,e=a.dataStreams,n=a.minBufferSize,o=a.bufferFactor,s=a.viewport,i=a.container,h=a.onUpdate,l=a.chartSize,u=a.thresholdOptions,v=a.thresholds,d=a.hasDataChanged,p=a.hasAnnotationChanged,m=a.hasSizeChanged;var S=r.scene.children[0];var g=X(S)<c(e);if(g||f(s,r.toClipSpace)){return E({onUpdate:h,dataStreams:e,alarms:t,container:i,viewport:s,minBufferSize:n,bufferFactor:o,chartSize:l,thresholdOptions:u,thresholds:v})}D({alarms:t,statuses:S,dataStreams:e,toClipSpace:r.toClipSpace,thresholdOptions:u,thresholds:v,chartSize:l,hasDataChanged:d,hasAnnotationChanged:p,hasSizeChanged:m});return r}))}}}));