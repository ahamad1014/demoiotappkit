System.register(["./p-cba1ca58.system.js","./p-7d965fb9.system.js","./p-2792cb06.system.js","./p-4143ebfb.system.js","./p-dfaa22dc.system.js"],(function(t){"use strict";var r,e,a,n,o,i,s,c,u,h,l,f,d,v,p,m;return{setters:[function(t){r=t.a},function(t){e=t.c},function(t){a=t.I;n=t.R;o=t.D;i=t.a;s=t.B;c=t.b;u=t.S},function(t){h=t.n;l=t.v;f=t.g;d=t.c;v=t.a;p=t.b},function(t){m=t.g}],execute:function(){var S="\nprecision highp float;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float width;\nattribute vec2 bar;\nattribute vec2 position;\nattribute vec3 color;\nvarying vec3 vColor;\n\nvoid main() {\n  // Negative width here because we want to render the bars' width to the left side starting from its x position.\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position.x * -width + bar.x, position.y * bar.y, 0.0, 1.0);\n  vColor = color;\n}\n";var b="\nprecision highp float;\nvarying vec3 vColor;\n\nvoid main() {\n  gl_FragColor = vec4(vColor, 1.0);\n}\n";var w=1/6;var y=function(t,r){return m(t,r*w)};var g=function(t){var r=t.toClipSpace,e=t.resolution,a=t.numDataStreams;return(m(r,e)-y(r,e))/a};var C=2;var x=3;var O=function(t){return t.reduce((function(t,r){return t+r.length}),0)};var F=function(t,r){if(t.length===0){return 0}var e=t[0].resolution;return g({toClipSpace:r,numDataStreams:t.length,resolution:e})};var j=function(t){var a=t.dataStreams,n=t.mesh,o=t.toClipSpace,i=t.thresholds,s=t.thresholdOptions;var c=a.filter(e).map((function(t){return l(t,t.resolution)}));n.count=O(c);var u=n.geometry;var h=u.attributes,d=h.color,v=h.bar;var p=0;var m=0;c.forEach((function(t,e){t.forEach((function(t){var n=t[0],c=t[1],u=t[2],h=t[3],l=t[4];v.array[p]=o(n)-e*F(a,o);v.array[p+1]=c;var S=r(c,i);if(S==null||!s.showColor){d.array[m]=u;d.array[m+1]=h;d.array[m+2]=l}else{var b=f(S.color),w=b[0],y=b[1],g=b[2];d.array[m]=w;d.array[m+1]=y;d.array[m+2]=g}m+=x;p+=C}))}));v.needsUpdate=true;d.needsUpdate=true};var z=[0,0,0,1,1,0,0,1,1,0,1,1];var A=function(t,r){t.setAttribute("position",new s(new Float32Array(z),C));t.setAttribute("bar",new c(new Float32Array(r*C),C,false));t.setAttribute("color",new c(new Uint8Array(r*x),x,true))};var U=function(t){var r=t.dataStreams,e=t.toClipSpace,s=t.bufferFactor,c=t.minBufferSize,u=t.thresholdOptions,l=t.thresholds;var f=new a;var d=Math.max(c,h(r)*s);A(f,d);var v=new n({vertexShader:S,fragmentShader:b,side:o,transparent:false,uniforms:{width:{value:F(r,e)}}});var p=new i(f,v,d);j({dataStreams:r,mesh:p,toClipSpace:e,thresholds:l,thresholdOptions:u});p.frustumCulled=false;return p};var B=function(t){var r=t.bars,e=t.dataStreams,a=t.toClipSpace,n=t.hasDataChanged,o=t.thresholdOptions,i=t.thresholds;if(n){r.material.uniforms.width.value=F(e,a);j({dataStreams:e,mesh:r,toClipSpace:a,thresholds:i,thresholdOptions:o})}};var D=function(t){return t.geometry.attributes.bar.array.length/C};var M=t("c",(function(t){var r=t.dataStreams,e=t.container,a=t.viewport,n=t.bufferFactor,o=t.minBufferSize,i=t.onUpdate,s=t.thresholdOptions,c=t.thresholds;var h=new u;var l=v(a);h.add(U({dataStreams:r,toClipSpace:l,bufferFactor:n,minBufferSize:o,thresholdOptions:s,thresholds:c}));return d({scene:h,viewport:a,container:e,toClipSpace:l,onUpdate:i})}));var E=t("u",(function(t){var r=t.scene,e=t.dataStreams,a=t.hasDataChanged,n=t.minBufferSize,o=t.bufferFactor,i=t.viewport,s=t.container,c=t.onUpdate,u=t.chartSize,l=t.thresholdOptions,f=t.thresholds,d=t.hasAnnotationChanged;var v=r.scene.children[0];var m=D(v)<h(e);if(m||p(i,r.toClipSpace)||d){return M({onUpdate:c,dataStreams:e,container:s,viewport:i,minBufferSize:n,bufferFactor:o,chartSize:u,thresholdOptions:l,thresholds:f})}B({bars:v,dataStreams:e,toClipSpace:r.toClipSpace,hasDataChanged:a,thresholdOptions:l,thresholds:f});return r}))}}}));