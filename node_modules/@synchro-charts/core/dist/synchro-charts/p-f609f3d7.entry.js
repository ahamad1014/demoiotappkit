import{h as i,r as t}from"./p-b5389ff3.js";import{D as e}from"./p-7e2c0687.js";import"./p-7747df38.js";import"./p-6b1d36dc.js";import{V as s}from"./p-741c7e7a.js";const a=()=>i("svg",{viewBox:"0 0 24 24"},i("path",{d:"M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"})),n=({previousPoint:{y:t},latestPoint:{y:e},miniVersion:s})=>{const n=(o=t,null==(r=e)||null==o?"None":r===o?"Flat":r>o?"Up":"Down");var r,o;return i("div",{class:{trend:!0,large:!s,down:"Down"===n,flat:"Flat"===n,up:"Up"===n}},i("div",{class:"data"},i("div",{class:"direction"},i(a,null)),i("div",{"data-testid":"previous-value",class:"value"},((i,t)=>{if(t===i)return"0%";if(0===i)return;const e=(100*(t/i-1)).toFixed(1);return(parseFloat(e)>0?e:-1*parseFloat(e))+"%"})(t,e))),!s&&i("div",{class:"trend-description"},"from previous value"))},r=class{constructor(i){t(this,i),this.isEditing=!1,this.isEnabled=!0,this.isLoading=!1,this.isRefreshing=!1,this.getValues=()=>this.trendStream&&this.trendStream.data.length?{latestPoint:this.trendStream.data[this.trendStream.data.length-1],previousPoint:this.trendStream.data[this.trendStream.data.length-2]}:{latestPoint:void 0,previousPoint:void 0},this.updateName=i=>{this.propertyStream?this.onChangeLabel({streamId:this.propertyStream.id,name:i}):this.alarmStream&&this.onChangeLabel({streamId:this.alarmStream.id,name:i})},this.fontColor=i=>this.isEnabled?null==i?"#16191f":this.valueColor||"#16191f":"#d5dbdb",this.fontSize=()=>44,this.iconSize=()=>.7*this.fontSize()}render(){const{latestPoint:t,previousPoint:a}=this.getValues(),r=this.isEnabled&&a&&t&&this.trendStream&&this.trendStream.dataType!==e.STRING,o=this.propertyStream||this.alarmStream,l=this.propertyStream?this.propertyPoint:this.alarmPoint,d=this.breachedThreshold?this.breachedThreshold.icon:void 0;if(null==o)return;const c=this.propertyStream&&this.propertyStream.error;return i("div",{class:{wrapper:!0,large:!this.miniVersion}},i("div",null),i("sc-data-stream-name",{displayTooltip:!1,label:o.name,detailedLabel:o.detailedName,pointType:"data",date:l&&new Date(l.x),onNameChange:this.updateName,isEditing:this.isEditing}),i("div",{class:"icon-container"},this.isEnabled&&d&&i("sc-chart-icon",{name:d,size:this.iconSize(),color:this.valueColor})),i("div",{class:{main:!0,large:!this.miniVersion}},null!=c&&i("sc-error-badge",{"data-testid":"warning"},c),this.isLoading?i("sc-loading-spinner",{"data-testid":"loading",style:{height:this.fontSize()+"px",width:this.fontSize()+"px"}}):i("div",{"data-testid":"current-value",class:{"value-wrapper":!0,large:!this.miniVersion},style:{color:this.fontColor(l)}},i(s,{isEnabled:this.isEnabled,value:l?l.y:void 0,unit:o.unit})),r&&this.isEnabled&&i(n,{previousPoint:a,latestPoint:t,miniVersion:this.miniVersion}),!r&&this.isEnabled&&l&&i("div",null,"at"," ",new Date(l.x).toLocaleString("en-US",{hour:"numeric",minute:"numeric"}))))}};r.style="@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}sc-kpi-base{font-size:var(--font-size-1);color:var(--polaris-gray-900)}sc-kpi-base sc-chart-icon{position:relative;top:-2px}sc-kpi-base .icon-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center;height:100%}sc-kpi-base .wrapper{overflow:hidden;display:grid;grid-template-columns:36px auto;grid-template-rows:auto auto}sc-kpi-base .description{font-size:var(--font-size-1);line-height:var(--line-height-1);font-weight:var(--font-weight-light);margin-bottom:var(--margin-medium)}sc-kpi-base .trend-description{margin-left:var(--margin-small)}sc-kpi-base .main{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:flex-start}sc-kpi-base sc-expandable-input .sc-expandable-input{margin:0;margin-left:var(--margin-small);font-size:var(--font-size-3);line-height:var(--line-height-3);text-overflow:ellipsis}sc-kpi-base .large .sc-expandable-input{font-size:var(--font-size-4);line-height:var(--line-height-4)}sc-kpi-base .value-wrapper{font-size:var(--font-size-6);line-height:var(--line-height-6)}sc-kpi-base .unit{color:var(--polaris-gray-900);font-size:var(--font-size-0);line-height:var(--line-height-0);padding-left:2px}sc-kpi-base .trend{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;color:#4263a6;font-size:var(--font-size-1);line-height:var(--line-height-1)}sc-kpi-base .trend.large{font-size:var(--font-size-2);line-height:var(--line-height-2)}sc-kpi-base .trend>.data{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}sc-kpi-base .trend>.data>.direction{position:relative;width:1.5rem;height:1.5rem;margin-right:0.3125rem;-webkit-transition:-webkit-transform 250ms ease-out;transition:-webkit-transform 250ms ease-out;transition:transform 250ms ease-out;transition:transform 250ms ease-out, -webkit-transform 250ms ease-out}sc-kpi-base .trend>.data>.direction svg{position:absolute;width:100%;height:100%}sc-kpi-base .trend>.data>.direction svg>path{fill:var(--visualization-sequential-blues-normal-1-0)}sc-kpi-base .trend.down>.data>.direction{-webkit-transform:rotate(45deg);transform:rotate(45deg)}sc-kpi-base .trend.up>.data>.direction{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}sc-kpi-base .trend>.data>.value{position:relative;line-height:1;text-align:center}sc-kpi-base sc-loading-spinner{display:inline-block;-webkit-transform:scale(0.75);transform:scale(0.75)}";export{r as sc_kpi_base}