import{C as r,a as n}from"./p-063edcd0.js";import{d as o}from"./p-fe9c1440.js";import{i as t}from"./p-45352c6b.js";import{i as e}from"./p-6b1d36dc.js";function u(r,n){return r<n?-1:r>n?1:r>=n?0:NaN}function l(r){let n=r,o=r;function t(r,n,t,e){for(null==t&&(t=0),null==e&&(e=r.length);t<e;){const u=t+e>>>1;o(r[u],n)<0?t=u+1:e=u}return t}return 1===r.length&&(n=(n,o)=>r(n)-o,o=function(r){return(n,o)=>u(r(n),o)}(r)),{left:t,center:function(r,o,e,u){null==e&&(e=0),null==u&&(u=r.length);const l=t(r,o,e,u-1);return l>e&&n(r[l-1],o)>-n(r[l],o)?l-1:l},right:function(r,n,t,e){for(null==t&&(t=0),null==e&&(e=r.length);t<e;){const u=t+e>>>1;o(r[u],n)>0?e=u:t=u+1}return t}}}const i=r=>r.filter(r=>e(r.value)),s=r=>{const n=r&&Array.isArray(r.y)&&r.y;if(!n)return r;const o=n.filter(r=>e(r.value));return o.length<1?function(r,n){var o={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&n.indexOf(t)<0&&(o[t]=r[t]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(t=Object.getOwnPropertySymbols(r);e<t.length;e++)n.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(r,t[e])&&(o[t[e]]=r[t[e]])}return o}(r,["y"]):Object.assign(Object.assign({},r),{y:o})},a=(r,n)=>{var o;const t=null===(o=r[0])||void 0===o?void 0:o.severity,e=n.severity,u=[n];return 0===r.length?u:null==t&&null==e||t===e?(r.push(n),r):null==t?u:null==e||t<e?r:u},f=({value:r,resolution:n,viewport:t,formatText:e})=>{return"number"==typeof r?e?(u=r)>99999||u<-9999||u<.001&&u>0||u>-.001&&u<0?u.toExponential(1).toString():u.toString().length>5?u.toString().substr(0,5):u.toString():r.toString():"string"==typeof r?r:"boolean"==typeof r?String(r):o(r,n,t);var u},p=r=>r.color,c=({annotation:r,resolution:n,viewport:o})=>{const t=r.showValue?f({value:r.value,resolution:n,viewport:o,formatText:!1}):null,e=r.label&&r.label.show?r.label.text:null;return e&&t?`${e} (${t})`:!t&&e?e:!e&&t?`(${t})`:""},m=r=>{const n=r.label&&r.label.show?r.label.text:null;return n?""+n:""},d=r=>r.label&&r.label.show?"inline":"none",v=r=>r.showValue?"inline":"none",b=r=>r.showValue||r.label&&r.label.show?"inline":"none",y=({annotation:r,resolution:o,viewport:t,formatText:e})=>{var u;const l=r.showValue?f({value:r.value,resolution:o,viewport:t,formatText:e}):null,i="comparisonOperator"in r?(null!==(u=n[r.comparisonOperator])&&void 0!==u?u:"")+" ":"";return l?`${i}${l}`:""},h=(n,o)=>{const t=e(n)?Number(n):n,u=e(o.value)?Number(o.value):o.value,l=o.comparisonOperator;if("number"==typeof t&&"number"==typeof u)switch(l){case r.GREATER_THAN:return t>u;case r.GREATER_THAN_EQUAL:return t>=u;case r.LESS_THAN:return t<u;case r.LESS_THAN_EQUAL:return t<=u;case r.EQUAL:return t===u;default:throw new Error("Unsupported number threshold comparison operator: "+l)}if("string"==typeof t&&"string"==typeof u){if(l===r.EQUAL)return t===u;if(l===r.CONTAINS)return t.includes(u);throw new Error("Unsupported string threshold comparison operator: "+l)}if("string"==typeof t&&Array.isArray(u)){if(l===r.EQUAL||l===r.CONTAINS)return u.some(r=>t.includes(r));throw new Error("Unsupported string array threshold comparison operator: "+l)}if("boolean"==typeof t&&"boolean"==typeof u){if(l===r.EQUAL)return t===u;throw new Error("Unsupported boolean threshold comparison operator: "+l)}return!1},w=l(r=>r.value).left,j={[r.LESS_THAN_EQUAL]:1,[r.LESS_THAN]:2,[r.GREATER_THAN_EQUAL]:3,[r.GREATER_THAN]:4,[r.EQUAL]:5},g=r=>[...r].sort((r,n)=>r.value===n.value?j[r.comparisonOperator]-j[n.comparisonOperator]:r.value-n.value),O=(r,n)=>{if(0===n.length)return;if("string"==typeof r||"boolean"==typeof r)return n.find(n=>h(r,n))||void 0;const o=(r=>r.reduce(a,[]))(n.filter(n=>h(r,n))),t=i(o),e=g(t),u=w(e,r);let l=e[u-1],s=e[u];return u===t.length&&t.length>1&&e[u-1].value===e[u-2].value&&(l=e[u-2],s=e[u-1]),0===u&&t.length>1&&e[u].value===e[u+1].value&&(l=e[u],s=e[u+1]),null!=l||null!=s?null!=l&&null==s?h(r,l)?l:void 0:null==l&&null!=s?h(r,s)?s:void 0:h(r,l)&&h(r,s)?r>=0?s:l:h(r,l)&&!h(r,s)?l:!h(r,l)&&h(r,s)?s:void 0:void 0},x=t(r=>null!=r.comparisonOperator),$=r=>r&&r.y?r.y.filter(x):[];export{O as a,l as b,i as c,u as d,p as e,c as f,$ as g,b as h,x as i,v as j,y as k,d as l,m,s as n,g as s}