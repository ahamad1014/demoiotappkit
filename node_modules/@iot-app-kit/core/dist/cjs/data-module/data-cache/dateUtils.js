"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.hasIntervalForRange = exports.getDateInterval = void 0;
const predicates_1 = require("../../common/predicates");
const time_1 = require("../../common/time");
/**
 * Collect the errors across the relevant data stream infos
 */
const getDateInterval = (viewport) => {
    const start = (0, predicates_1.isHistoricalViewport)(viewport)
        ? new Date(viewport.start)
        : new Date(Date.now() - (0, time_1.parseDuration)(viewport.duration));
    const end = (0, predicates_1.isHistoricalViewport)(viewport)
        ? new Date(viewport.end)
        : new Date();
    return {
        start,
        end,
    };
};
exports.getDateInterval = getDateInterval;
const hasIntervalForRange = (intervals, range) => {
    if (!intervals)
        return false;
    return intervals === null || intervals === void 0 ? void 0 : intervals.some((interval) => {
        const intervalStart = new Date(interval[0]);
        const intervalEnd = new Date(interval[1]);
        const isStartWithinInterval = range.start >= intervalStart && range.start <= intervalEnd;
        const isEndWithinInterval = range.end >= intervalStart && range.end <= intervalEnd;
        return isStartWithinInterval && isEndWithinInterval;
    });
};
exports.hasIntervalForRange = hasIntervalForRange;
